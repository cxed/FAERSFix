#!/bin/bash
# faers_firstaid - Chris X Edwards - 20160913

function show_usage {
cat <<"EOUSAGE"
== Usage

    faers_firstaid file1 ... fileN

Remember, correct files are ignored; if the program doesn't recognize
a file that means that it is not on the list of known files that need
to be fixed. Also files are fixed in place!

For a full description of how and why this program does what it does.

    faers_firstaid [-h|--help]

EOUSAGE
} # End function show_usage

function show_description {
cat <<"EODESCRIPTION"
== Introduction
The FAERS data provided by the FDA is heavily littered with very
serious problems of all kinds. One of the worst kinds of problems is
a complete breakdown in the basic format of the data. Generally the
text files are a collection of records separated by a record
separator; note that as downloaded, a freshly unpacked text file
will use DOS CR/LF line endings as the record separator. Each record
is separated into feilds, by `$` as downloaded. 

A major problem arises when the data itself contain either the field
seperator or record seperator. This manifests itself as an extra `$`
for field separators incorrectly used and broken lines where an
extra record separator (CR/LF) is used. The latter case creates
records that seem to have, roughly, half of the number of fields for
a couple of lines. Sometimes there are two record separators
embedded in a record causing an additional blank line in the file.

Obviously fixing this is not something that can be done by normal
procedural tools if those tools are relying on the structure of the
file to maintain its integrity with respect to field and record
separation. 

When a file is found that has these kinds of major problems that can
only be discovered and fixed manually, this program is a centralized
resource for correctly and unambiguously preserving and documenting
the fix.

== Operation
This program operates on particular historical data files provided
by the FDA. It requires three things. The first thing it requires is
an md5sum hash (see `man md5sum`) of the first 100kB of the file in
question. Since these files can get quite large, this allows the
program to quickly exclude files that definitely do not need any
attention. The second requirement is the full md5sum hash. This
allows the program to confirm that the 100kB hash match was indeed
completely correct and that it is unambiguously looking at a file
that is known to need correction. This strategy allows this program
to be safely run on any file. 

Finally, the program needs to know how to fix the problem. This is a
complicated problem but fortunately, one that has been solved by
software engineers in the form of the `diff` and `patch` commands.
The technique is to make a copy of the defective file and then edit
the copy by hand so that it is no longer defective. Once you have an
original and a corrected version, you can run
   diff file.orig file.fix
and get a procedure that the `patch` program can use to make that
change automatically.

If a new file that needs major preliminary correction is discovered,
create a new function for it following the template of the existing
collection. Find the correct md5sum for the first 100k with
    head -c 100000 file.orig | md5sum
And use `md5sum file.orig` for the full md5sum.
Make sure the function has a unique name (i.e. match its name to the
file it is designed to fix). Create a patch procedure with `diff` as
described.

If a file that already has a correction function needs more or different
correction than previously thought, just create the updated patch portion and
replace it in the function for that file.
EODESCRIPTION
} # End function show_description

declare -A FIXES

#========== demo09q3.txt ==========
FIXES["56e19cb65d86dd938572c6a035c60677"]="fix_demo09q3"

function fix_demo09q3 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="c2355b982b88fa82b8c3627ec130e85b"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo09q3"
53921,53922c53921
< 6307398$6784218$I$$6307398-8$20040501$20081001$20090810$PER$US-JNJFOC-20081000321$JOHNSON + JOHNSON PHARMACEUTICAL
< $13$YR$F$N$$$20090713$CN$$$$UNITED STATES$
---
> 6307398$6784218$I$$6307398-8$20040501$20081001$20090810$PER$US-JNJFOC-20081000321$JOHNSON + JOHNSON PHARMACEUTICAL $13$YR$F$N$$$20090713$CN$$$$UNITED STATES$
PATCHdemo09q3
#== End Patching
fi
} # End function fix_demo09q3

#========== demo12q1.txt ==========
FIXES["614866a579b33cc6fb7b2d2f26f84e1c"]="fix_demo12q1"

function fix_demo12q1 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="c423d90b3ffebe29081f8da2423cd7e6"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo12q1"
105988c105988
< 8129732$8401177$I$$8129732-9$20120126$20120206$20120210$EXP$JP-CUBIST-$E2B0000000182$CUBIST PHARMACEUTICALS, INC.$85$YR$M$Y$$$20120210$PH$$$$JAPAN$
---
> 8129732$8401177$I$$8129732-9$20120126$20120206$20120210$EXP$JP-CUBIST-E2B0000000182$CUBIST PHARMACEUTICALS, INC.$85$YR$M$Y$$$20120210$PH$$$$JAPAN$
PATCHdemo12q1
#== End Patching
fi
} # End function fix_demo12q1

#========== demo08q2.txt ==========
FIXES["29ff7ec1b4d7299e182130b401d0fb8e"]="fix_demo08q2"

function fix_demo08q2 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="80b1008e459e79b4929c140422f1ab3b"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo08q2"
244961,244962c244961
< 5756385$1009982337$PS$REVLIMID$1$ORAL$X21 DAYS EVERY 28 DAYS, ORAL
< $D$D$$$21880$
---
> 5756385$1009982337$PS$REVLIMID$1$ORAL$X21 DAYS EVERY 28 DAYS, ORAL$D$D$$$21880$
PATCHdemo08q2
#== End Patching
fi
} # End function fix_demo08q2

#========== demo08q3.txt ==========
FIXES["22e141a04f1e52698d457192d24cb80b"]="fix_demo08q3"

function fix_demo08q3 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="3a21a43f9091bc78ae782a1e2e302a30"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo08q3"
65132,65133c65132
< 5814346$1010186647$PS$ROZEREM$1$ORAL$8MG, QHS, PER ORAL; 
< 8 MG, 1/2 TABLET QHS, PER ORAL ;  8 MG, 1/4 TABLET QHS, PER ORAL ;   8 MG, QHS,$D$D$C11806$20071201$21782$
---
> 5814346$1010186647$PS$ROZEREM$1$ORAL$8MG, QHS, PER ORAL; 8 MG, 1/2 TABLET QHS, PER ORAL ;  8 MG, 1/4 TABLET QHS, PER ORAL ;   8 MG, QHS,$D$D$C11806$20071201$21782$
103267,103269c103266
< 5824493$1010226669$PS$OLMETEC (OLMESARTAN MEDOXOMIL) (TABLET) (OLMESARTAN L MEDOXOMIL)$2$ORAL$10 MG (10 MG, 1 IN 1 D), PER ORAL
< 
< $N$D$$$21286$
---
> 5824493$1010226669$PS$OLMETEC (OLMESARTAN MEDOXOMIL) (TABLET) (OLMESARTAN L MEDOXOMIL)$2$ORAL$10 MG (10 MG, 1 IN 1 D), PER ORAL$N$D$$$21286$
114083,114084c114080
< 5827311$1010237895$PS$OLMESARTAN MEDOXOMIL$1$ORAL$20 MG (20 MG, 1 IN 1 D), PER ORAL
< $Y$D$$$21286$
---
> 5827311$1010237895$PS$OLMESARTAN MEDOXOMIL$1$ORAL$20 MG (20 MG, 1 IN 1 D), PER ORAL$Y$D$$$21286$
144047,144048c144043
< 5835922$1010268815$PS$REVLIMID$1$ORAL$25 MG, DAILY,  ORAL;  10 MG, DAILY, ORAL
< $Y$Y$$$21880$
---
> 5835922$1010268815$PS$REVLIMID$1$ORAL$25 MG, DAILY,  ORAL;  10 MG, DAILY, ORAL$Y$Y$$$21880$
212842,212844c212837
< 5853431$1010337221$PS$DICLOREUM TISSUGEL (DICLOFENAC EPOLAMINUM)$2$TOPICAL$1 PATCH DAILY, TOPICAL
< 
< $Y$D$$$21234$
---
> 5853431$1010337221$PS$DICLOREUM TISSUGEL (DICLOFENAC EPOLAMINUM)$2$TOPICAL$1 PATCH DAILY, TOPICAL$Y$D$$$21234$
276544,276545c276537
< 5871230$1010430059$SS$DOMINAL /00018902/ (DOMINAL FORTE - PROTHIPENDYL) 80 MG (NOT SPECIFIED$2$ORAL$(80 MG 1X
<  NOT THE PRESCRIBED AMOUNT ORAL)$D$D$$$$
---
> 5871230$1010430059$SS$DOMINAL /00018902/ (DOMINAL FORTE - PROTHIPENDYL) 80 MG (NOT SPECIFIED$2$ORAL$(80 MG 1X NOT THE PRESCRIBED AMOUNT ORAL)$D$D$$$$
369369,369370c369361
< 5897624$1010500442$PS$INNOHEP$1$SUBCUTANEOUS$
< (1000 IU,DAILY), SUBCUTANEOUS$N$D$$$20484$
---
> 5897624$1010500442$PS$INNOHEP$1$SUBCUTANEOUS$(1000 IU,DAILY), SUBCUTANEOUS$N$D$$$20484$
PATCHdemo08q3
#== End Patching
fi
} # End function fix_demo08q3

#========== demo08q4.txt ==========
FIXES["08c6d03b60a182020ae84fc03db91a8a"]="fix_demo08q4"

function fix_demo08q4 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="257b0b1e64c117b1478ae2d5c702de0c"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo08q4"
537,539c537
< 5853431$1010337221$PS$DICLOREUM TISSUGEL (DICLOFENAC EPOLAMINUM)$2$TOPICAL$1 PATCH DAILY, TOPICAL
< 
< $Y$D$$$21234$
---
> 5853431$1010337221$PS$DICLOREUM TISSUGEL (DICLOFENAC EPOLAMINUM)$2$TOPICAL$1 PATCH DAILY, TOPICAL$Y$D$$$21234$
258909,258911c258907
< 5977538$1010790938$PS$FENOFIBRATE$1$ORAL$130 MG, QD, ORAL
< 
< $U$D$$$21695$
---
> 5977538$1010790938$PS$FENOFIBRATE$1$ORAL$130 MG, QD, ORAL$U$D$$$21695$
281285,281287c281281
< 5985254$1010814104$PS$APOKYN$1$SUBCUTANEOUS$(0.3 ML,   SUBCUTANEOUS)
< 
< $Y$$$$21264$
---
> 5985254$1010814104$PS$APOKYN$1$SUBCUTANEOUS$(0.3 ML,   SUBCUTANEOUS)$Y$$$$21264$
408948,408949c408942
< 6025389$1010943017$PS$BUPIVACAINE HYDROCHLORIDE AND EPINEPHRINE$1$INTRA-ARTICULAR$
< 270 ML, 0.25% CONTINUOUS VIA PAIN PUMP, INTRA-ARTICULAR,   1:200,000; 50 ML, THEN 30 ML, LOCAL INFI$D$D$$$18304$
---
> 6025389$1010943017$PS$BUPIVACAINE HYDROCHLORIDE AND EPINEPHRINE$1$INTRA-ARTICULAR$270 ML, 0.25% CONTINUOUS VIA PAIN PUMP, INTRA-ARTICULAR,   1:200,000; 50 ML, THEN 30 ML, LOCAL INFI$D$D$$$18304$
PATCHdemo08q4
#== End Patching
fi
} # End function fix_demo08q4

#========== demo09q1.txt ==========
FIXES["da154a1b6a57a81b38d3e0c2ba095255"]="fix_demo09q1"

function fix_demo09q1 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="c3bc6d475713af93c9467d54a451905c"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo09q1"
9223,9224c9223
< 6029352$1010956944$PS$AMBISOME$1$INTRAVENOUS$150 MG, UID/QD, IV NOS;  75 MG, UID/QD, IV NOS 
< $U$D$$$50740$
---
> 6029352$1010956944$PS$AMBISOME$1$INTRAVENOUS$150 MG, UID/QD, IV NOS;  75 MG, UID/QD, IV NOS$U$D$$$50740$
390313,390314c390312
< 6134290$1011364157$SS$FLUDARABINE PHOSPHATE$1$INTRAVENOUS$25 MG/M2, 3 IN 1 CYCLE, INTRAVENOUS (NOT OTHERWISE SPECIFIED)
< $$$$$$
---
> 6134290$1011364157$SS$FLUDARABINE PHOSPHATE$1$INTRAVENOUS$25 MG/M2, 3 IN 1 CYCLE, INTRAVENOUS (NOT OTHERWISE SPECIFIED)$$$$$$
PATCHdemo09q1
#== End Patching
fi
} # End function fix_demo09q1

#========== demo09q2.txt ==========
FIXES["18f12d836534274470a4b114a508f49d"]="fix_demo09q2"

function fix_demo09q2 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="2a800eba3c483b04ddec336795c636d3"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo09q2"
108940,108941c108940
< 6165850$1011499106$SS$FERROUS SULFATE TAB$1$TRANSPLACENTAL$200 MG; TWICE A DAY; TRANSPLACENTAL
< $$D$$$$
---
> 6165850$1011499106$SS$FERROUS SULFATE TAB$1$TRANSPLACENTAL$200 MG; TWICE A DAY; TRANSPLACENTAL$$D$$$$
131311,131312c131310
< 6171599$1011494545$PS$LISDEXAMFETAMINE DIMESYLATE VS PLACEBO(CODE NOT BROKEN) CAPSULE$2$ORAL$
< 1X/DAY: QD, ORAL$D$D$$$21977$
---
> 6171599$1011494545$PS$LISDEXAMFETAMINE DIMESYLATE VS PLACEBO(CODE NOT BROKEN) CAPSULE$2$ORAL$1X/DAY: QD, ORAL$D$D$$$21977$
179100,179101c179098
< 6183147$1011542674$PS$SOMATULINA AUTOGEL 120MG (LANREOTIDE ACETATE) (LANREOTIDE ACETATE)$2$SUBCUTANEOUS$(120 MG, 1 IN 28 D)
<  SUBCUTANEOUS$Y$D$$$22074$
---
> 6183147$1011542674$PS$SOMATULINA AUTOGEL 120MG (LANREOTIDE ACETATE) (LANREOTIDE ACETATE)$2$SUBCUTANEOUS$(120 MG, 1 IN 28 D) SUBCUTANEOUS$Y$D$$$22074$
180092,180093c180089
< 6183369$1011543711$PS$TACROLIMUS$1$ORAL$4 MG,  /D;  6 MG,  /D, ORAL
< $Y$D$$$50708$
---
> 6183369$1011543711$PS$TACROLIMUS$1$ORAL$4 MG,  /D;  6 MG,  /D, ORAL$Y$D$$$50708$
181224,181226c181220
< 6183683$1011544929$PS$NICOTINELL TTS (NICOTINE) TRANS-THERAPEUTIC-SYSTEM$2$TRANSDERMAL$7 MG, QD, TRANSDERMAL
< 
< $$$$$20076$
---
> 6183683$1011544929$PS$NICOTINELL TTS (NICOTINE) TRANS-THERAPEUTIC-SYSTEM$2$TRANSDERMAL$7 MG, QD, TRANSDERMAL$$$$$20076$
190457,190458c190451
< 6185934$1011554697$PS$LIORESAL$1$INTRATHECAL$24 MCG, DAILY, INTRATHECAL, TAPERING
< $D$D$$$20075$
---
> 6185934$1011554697$PS$LIORESAL$1$INTRATHECAL$24 MCG, DAILY, INTRATHECAL, TAPERING$D$D$$$20075$
428472,428473c428465
< 6244680$1011790765$PS$VECURONIUM BROMIDE$1$INTRAVENOUS$10 MG ONCE/2 MG ONCE/2 MG ONCE, INTRAVENOUS (NOS)
< $D$D$$$18776$
---
> 6244680$1011790765$PS$VECURONIUM BROMIDE$1$INTRAVENOUS$10 MG ONCE/2 MG ONCE/2 MG ONCE, INTRAVENOUS (NOS)$D$D$$$18776$
PATCHdemo09q2
#== End Patching
fi
} # End function fix_demo09q2


#========== demo09q3.txt ==========
FIXES["9b275ec7dd1a8bebc36f40c9a47e7841"]="fix_demo09q3"

function fix_demo09q3 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="f6ba34551c6a3995492efc35a4395707"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo09q3"
32674,32675c32674
< 6260850$1011856721$PS$CEREZYME$1$INTRAVENOUS$30 U/KG, Q2W, INTRAVENOUS
< ; 15 U/KG, Q2W, INTRAVENOUS$U$U$$$20367$
---
> 6260850$1011856721$PS$CEREZYME$1$INTRAVENOUS$30 U/KG, Q2W, INTRAVENOUS; 15 U/KG, Q2W, INTRAVENOUS$U$U$$$20367$
484531,484532c484530
< 6371267$1012312406$PS$COMPOUNDING HYALURONIDASE - COMPOUNDED 150 M/ML$2$$
< NOT DOCUMENTED USUAL DOSE .2-.3 CC PERIBULBAR EYE BLOCK X1$Y$D$2301103$20090910$$
---
> 6371267$1012312406$PS$COMPOUNDING HYALURONIDASE - COMPOUNDED 150 M/ML$2$$NOT DOCUMENTED USUAL DOSE .2-.3 CC PERIBULBAR EYE BLOCK X1$Y$D$2301103$20090910$$
PATCHdemo09q3
#== End Patching
fi
} # End function fix_demo09q3


#========== demo09q4.txt ==========
FIXES["d593ebb3a9f1ab5431fcb4d2915c17a2"]="fix_demo09q4"

function fix_demo09q4 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="3958f281af8364d05eb1042073d9e714"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo09q4"
55626,55627c55626
< 6398528$1012417632$PS$LIORESAL$1$INTRATHECAL$UNK MCG, DAILY, INTRATHECAL
< $D$D$$$20075$
---
> 6398528$1012417632$PS$LIORESAL$1$INTRATHECAL$UNK MCG, DAILY, INTRATHECAL$D$D$$$20075$
266798,266799c266797
< 6452665$1012631292$PS$VASOTEC$1$ORAL$(5 MG QD ORAL), (DF ORAL)
< $Y$$$$18998$
---
> 6452665$1012631292$PS$VASOTEC$1$ORAL$(5 MG QD ORAL), (DF ORAL)$Y$$$$18998$
436612,436613c436610
< 6502456$1012801659$PS$FLUDARABINE PHOSPHATE$1$$25 MILLIGRAM(S)/SQUARE METER;DAILY
< $$D$$$22273$
---
> 6502456$1012801659$PS$FLUDARABINE PHOSPHATE$1$$25 MILLIGRAM(S)/SQUARE METER;DAILY$$D$$$22273$
436632,436633c436629
< 6502458$1012801661$PS$FLUDARABINE PHOSPHATE$1$$25 MILLIGRAM(S)/SQUARE METER;DAILY
< $Y$D$$$22273$
---
> 6502458$1012801661$PS$FLUDARABINE PHOSPHATE$1$$25 MILLIGRAM(S)/SQUARE METER;DAILY$Y$D$$$22273$
PATCHdemo09q4
#== End Patching
fi
} # End function fix_demo09q4

#========== demo10q1.txt ==========
FIXES["e1ea572686546bf05a2bcd236cd48336"]="fix_demo10q1"

function fix_demo10q1 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="bb34d6a5ea543d6be9f3ada3ab5c64be"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo10q1"
226584,226585c226584
< 6582919$1013124834$PS$CEREZYME$1$INTRAVENOUS$800 U, Q2W, INTRAVENOUS
< $D$D$$$20367$
---
> 6582919$1013124834$PS$CEREZYME$1$INTRAVENOUS$800 U, Q2W, INTRAVENOUS$D$D$$$20367$
328187,328188c328186
< 6611019$1013226533$PS$DECITABINE (DECITABINE) LYOPHILIZED POWDER$2$INTRAVENOUS$30 MG, IN 1 DAY, INTRAVENOUS
< $D$D$$$21790$
---
> 6611019$1013226533$PS$DECITABINE (DECITABINE) LYOPHILIZED POWDER$2$INTRAVENOUS$30 MG, IN 1 DAY, INTRAVENOUS$D$D$$$21790$
334992,334993c334990
< 6612718$1013315836$SS$BYETTA$1$SUBCUTANEOUS$
< 10 MCG (5 MCG, 2 IN 1 D) SUBCUTANEOUS ; 20 MCG (10 MCG,2 IN 1 D) SUBCUTANEOUS$$$$$$
---
> 6612718$1013315836$SS$BYETTA$1$SUBCUTANEOUS$10 MCG (5 MCG, 2 IN 1 D) SUBCUTANEOUS ; 20 MCG (10 MCG,2 IN 1 D) SUBCUTANEOUS$$$$$$
482260,482261c482257
< 6652288$1013384025$PS$ELAPRASE$1$INTRAVENOUS DRIP$9 DF, 1X/WEEK, IV DRIP
< $D$D$$$$
---
> 6652288$1013384025$PS$ELAPRASE$1$INTRAVENOUS DRIP$9 DF, 1X/WEEK, IV DRIP$D$D$$$$
483234,483235c483230
< 6652508$1013384910$PS$ESCITALOPRAM OXALATE$1$ORAL$(ONCE), ORAL
< $D$D$$$21323$
---
> 6652508$1013384910$PS$ESCITALOPRAM OXALATE$1$ORAL$(ONCE), ORAL$D$D$$$21323$
PATCHdemo10q1
#== End Patching
fi
} # End function fix_demo10q1

#========== demo10q2.txt ==========
FIXES["a5c66e93f2e3f0511605fed05a97ec12"]="fix_demo10q2"

function fix_demo10q2 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="10cb7d61470ad413f56ee0ee1123784a"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo10q2"
20221,20222c20221
< 6668307$1013448045$PS$LIORESAL$1$INTRATHECAL$59.95 MCG, DAILY, INTRATHECAL
< $D$D$$$20075$
---
> 6668307$1013448045$PS$LIORESAL$1$INTRATHECAL$59.95 MCG, DAILY, INTRATHECAL$D$D$$$20075$
149012,149013c149011
< 6699423$1013580762$PS$NOVANTRONE$1$INTRAVENOUS$1 IN 3 M, INTRAVENOUS (NOT OTHERWISE SPECIFIED)
< $N$D$$$19297$
---
> 6699423$1013580762$PS$NOVANTRONE$1$INTRAVENOUS$1 IN 3 M, INTRAVENOUS (NOT OTHERWISE SPECIFIED)$N$D$$$19297$
352492,352495c352490,352491
< 6750381$1013788916$PS$MORPHINE SULFATE$1$ORAL$#1. 15 MG, QID, ORAL
< $D$D$$$$
< 6750381$1013798159$SS$MORPHINE SULFATE$1$ORAL$30 MG, TID, ORAL
< $D$D$$$$
---
> 6750381$1013788916$PS$MORPHINE SULFATE$1$ORAL$#1. 15 MG, QID, ORAL$D$D$$$$
> 6750381$1013798159$SS$MORPHINE SULFATE$1$ORAL$30 MG, TID, ORAL$D$D$$$$
387282,387283c387278
< 6759394$1013822377$PS$XYREM$1$$ORAL, (4.5 GM,D), ORAL
< $D$D$$$21196$
---
> 6759394$1013822377$PS$XYREM$1$$ORAL, (4.5 GM,D), ORAL$D$D$$$21196$
396246,396247c396241
< 6761688$1013830689$PS$HAEMATE P (FACTOR VIII (ANTIHAEMOPHILIC FACTOR))$2$INTRAVENOUS$ 3000 IU, 20 ML / MIN, 3000 IU, 3000, INTRAVENOUS (NOT OTHERWISE SPECIFIED)$D$D$
< 34466911C$$$
---
> 6761688$1013830689$PS$HAEMATE P (FACTOR VIII (ANTIHAEMOPHILIC FACTOR))$2$INTRAVENOUS$ 3000 IU, 20 ML / MIN, 3000 IU, 3000, INTRAVENOUS (NOT OTHERWISE SPECIFIED)$D$D$34466911C$$$
566132,566133c566126
< 6811503$1014011953$PS$LANSOPRAZOLE$1$ORAL$30 MG (30 MG,ONCE), PER ORAL
< $$$$$20406$
---
> 6811503$1014011953$PS$LANSOPRAZOLE$1$ORAL$30 MG (30 MG,ONCE), PER ORAL$$$$$20406$
573243,573244c573236
< 6856715$1014174784$PS$BYSTOLIC$1$ORAL$
< 10 MG (10 MG, 1 IN 1 D), ORAL$D$D$$$21742$
---
> 6856715$1014174784$PS$BYSTOLIC$1$ORAL$10 MG (10 MG, 1 IN 1 D), ORAL$D$D$$$21742$
PATCHdemo10q2
#== End Patching
fi
} # End function fix_demo10q2

#========== demo10q3.txt ==========
FIXES["72c30ceaf0eeaad91d129999af7c3179"]="fix_demo10q3"

function fix_demo10q3 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="e49c22d9f53b5205905f88b11dd22770"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo10q3"
102759,102760c102759
< 6839661$1014120504$PS$ CERTOLIZUMAB PEGOL (CERTOLIZUMAB PEGOL)$2$SUBCUTANEOUS$
< SEE IMAGE$D$D$$$$
---
> 6839661$1014120504$PS$ CERTOLIZUMAB PEGOL (CERTOLIZUMAB PEGOL)$2$SUBCUTANEOUS$SEE IMAGE$D$D$$$$
483396,483397c483395
< 6946633$1014509048$PS$ESCITALOPRAM$1$ORAL$
< 5 MG (5 MG, 1 IN 1 D), ORAL$Y$D$$$21323$
---
> 6946633$1014509048$PS$ESCITALOPRAM$1$ORAL$5 MG (5 MG, 1 IN 1 D), ORAL$Y$D$$$21323$
485350,485351c485348
< 6946968$1014510913$PS$PROPRANOLOL HYDROCHLORIDE$1$ORAL$15 DF,ORAL
< $D$D$$$72499$
---
> 6946968$1014510913$PS$PROPRANOLOL HYDROCHLORIDE$1$ORAL$15 DF,ORAL$D$D$$$72499$
623400,623401c623397
< 6980102$1014650497$PS$AMITRIPTYLINE TABLET 10 MG (NO PREF. NAME)$2$ORAL$1.2 G;X1; PO  800 MG;X1;PO
< $D$D$$$89399$
---
> 6980102$1014650497$PS$AMITRIPTYLINE TABLET 10 MG (NO PREF. NAME)$2$ORAL$1.2 G;X1; PO  800 MG;X1;PO$D$D$$$89399$
730301,730302c730297
< 7007477$1014755362$PS$XENAZINE$1$ORAL$(12.5 MG, ONE TABLET EVERY MORNING; TWO TABLETS EVERY NIGHT ORAL)
< $Y$$$$21894$
---
> 7007477$1014755362$PS$XENAZINE$1$ORAL$(12.5 MG, ONE TABLET EVERY MORNING; TWO TABLETS EVERY NIGHT ORAL)$Y$$$$21894$
PATCHdemo10q3
#== End Patching
fi
} # End function fix_demo10q3

#========== demo10q4.txt ==========
FIXES["0f5430e809d687f956bbf51d5278e134"]="fix_demo10q4"

function fix_demo10q4 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="b3d89533c54aa6c387143a5fb0f1552c"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo10q4"
397661,397663c397661
< 7130573$1015216942$PS$DEGARELIX 240 MG$2$$(240 MG  1X, 240 MG ONCE SUBCUTANEOUS)  
< 
< $D$D$$$022201$
---
> 7130573$1015216942$PS$DEGARELIX 240 MG$2$$(240 MG  1X, 240 MG ONCE SUBCUTANEOUS)$D$D$$$022201$
403062,403063c403060
< 7131945$1015308136$SS$BUFFERIN$1$$10 MG/DAILY/PO HYPERTENSION
< $$$$$$
---
> 7131945$1015308136$SS$BUFFERIN$1$$10 MG/DAILY/PO HYPERTENSION$$$$$$
433891,433892c433888
< 7141162$1015252875$PS$ISOSORBIDE MONONITRATE EXTENDED-RELEASE TABLETS, 30 MG (PUREPAC) (ISOS$2$$
< 30 MG;BID$D$D$$$075306$
---
> 7141162$1015252875$PS$ISOSORBIDE MONONITRATE EXTENDED-RELEASE TABLETS, 30 MG (PUREPAC) (ISOS$2$$30 MG;BID$D$D$$$075306$
PATCHdemo10q4
#== End Patching
fi
} # End function fix_demo10q4

#========== demo11q1.txt ==========
FIXES["c2cc6ef01fa24fd64ba601418da1a670"]="fix_demo11q1"

function fix_demo11q1 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="33c8b272ca2427920bbadcf117e6736e"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo11q1"
330540,330541c330540
< 7296869$1015798473$PS$CERTOLIZUMAB PEGOL (CERTOLIZUMAB PEGOL)$2$SUBCUTANEOUS$
< (400 MG 1X/2 WEEKS SUBCUTANEOUS), (400 MG 1X/MONTH SUBCUTANEOUS)$D$D$$$$
---
> 7296869$1015798473$PS$CERTOLIZUMAB PEGOL (CERTOLIZUMAB PEGOL)$2$SUBCUTANEOUS$(400 MG 1X/2 WEEKS SUBCUTANEOUS), (400 MG 1X/MONTH SUBCUTANEOUS)$D$D$$$$
338158,338159c338157
< 7298835$1015805929$PS$NYSTATIN + TRIAMCINOLONE ACETONIDE$1$TOPICAL$
< BIP; TOP$D$D$LG0018$20130701$062364$
---
> 7298835$1015805929$PS$NYSTATIN + TRIAMCINOLONE ACETONIDE$1$TOPICAL$BIP; TOP$D$D$LG0018$20130701$062364$
387370,387371c387368
< 7312387$1015854731$PS$AMPHOTERICIN B$1$INTRAVENOUS$(DF, FOR UNKNOWN INTRAVENOUS (NOT OTHERWISE SPECIFIED))
< $D$D$$$050729$
---
> 7312387$1015854731$PS$AMPHOTERICIN B$1$INTRAVENOUS$(DF, FOR UNKNOWN INTRAVENOUS (NOT OTHERWISE SPECIFIED))$D$D$$$050729$
439850,439854c439847
< 7327902$1015907701$PS$CIMZIA$1$SUBCUTANEOUS$(400 MG 1X/2 WEEKS SUBCUTANEOUS), (400 MG 1X/28 DAYS SUBCUTANEOUS)$Y$$56148
< 
< 
< 
< $20130401$$
---
> 7327902$1015907701$PS$CIMZIA$1$SUBCUTANEOUS$(400 MG 1X/2 WEEKS SUBCUTANEOUS), (400 MG 1X/28 DAYS SUBCUTANEOUS)$Y$$56148$20130401$$
488034,488035c488027
< 7340877$1015956744$PS$LACOSAMIDE$1$ORAL$
< MILLILETERS ORAL), (3 MILLILETERS ORAL), (5 MILLILETERS ORAL), (7 MILLILETERS ORAL), (8 MILLILETERS$D$D$$$022253$
---
> 7340877$1015956744$PS$LACOSAMIDE$1$ORAL$MILLILETERS ORAL), (3 MILLILETERS ORAL), (5 MILLILETERS ORAL), (7 MILLILETERS ORAL), (8 MILLILETERS$D$D$$$022253$
585584,585585c585576
< 7366590$1016137815$SS$LACOSAMIDE$1$$100 MG;QD  
< $D$D$$$$
---
> 7366590$1016137815$SS$LACOSAMIDE$1$$100 MG;QD$D$D$$$$
597815,597816c597806
< 7369596$1016067537$PS$REMODULIN$1$SUBCUTANEOUS$
< 37.44 UG/KG (0.026 UG/KG, 1 IN 1 MIN),SUBCUTANEOUS$D$D$915303$$021272$
---
> 7369596$1016067537$PS$REMODULIN$1$SUBCUTANEOUS$37.44 UG/KG (0.026 UG/KG, 1 IN 1 MIN),SUBCUTANEOUS$D$D$915303$$021272$
PATCHdemo11q1
#== End Patching
fi
} # End function fix_demo11q1

#========== demo11q2.txt ==========
FIXES["f5352cd5d83ebe0dfb8a495e12738974"]="fix_demo11q2"

function fix_demo11q2 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="f437fe7a0bc3caae2c174dc6182e95df"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo11q2"
98495,98496c98495
< 7414750$1016250788$PS$PREDNISONE$1$ORAL$10 MG, 1 IN 1 D, PER ORAL  
< $D$D$$$089247$
---
> 7414750$1016250788$PS$PREDNISONE$1$ORAL$10 MG, 1 IN 1 D, PER ORAL$D$D$$$089247$
323365,323366c323364
< 7475775$1016571806$SS$BLEOMYCIN SULFATE$1$INTRAVENOUS$10 MG/M2 MILLIGRAM(S)/SQ. METER, DAY 1 AND 15, EVERY 28 DAYS, INTRAVENOUS (NOT OTHERWISE SPECIFIED)
< $$$$$$
---
> 7475775$1016571806$SS$BLEOMYCIN SULFATE$1$INTRAVENOUS$10 MG/M2 MILLIGRAM(S)/SQ. METER, DAY 1 AND 15, EVERY 28 DAYS, INTRAVENOUS (NOT OTHERWISE SPECIFIED)$$$$$$
323395,323396c323393
< 7475784$1016572017$SS$BLEOMYCIN SULFATE$1$INTRAVENOUS$10 MG/M2 MILLIGRAM(S)/SQ. METER, DAY 1 AND 15, EVERY 28 DAYS, INTRAVENOUS (NOT OTHERWISE SPECIFIED)
< $$$$$$
---
> 7475784$1016572017$SS$BLEOMYCIN SULFATE$1$INTRAVENOUS$10 MG/M2 MILLIGRAM(S)/SQ. METER, DAY 1 AND 15, EVERY 28 DAYS, INTRAVENOUS (NOT OTHERWISE SPECIFIED)$$$$$$
323400,323401c323397
< 7475784$1016572015$SS$DOXORUBICIN (DOXORUBICIN) (INJECTION)$2$INTRAVENOUS$25 MG/M2 MILLIGRAM(S)/SQ. METER, DAY 1 AND 15, EVERY 28 DAYS, INTRAVENOUS (NOT OTHERWISE SPECIFIED)
< $$$$$$
---
> 7475784$1016572015$SS$DOXORUBICIN (DOXORUBICIN) (INJECTION)$2$INTRAVENOUS$25 MG/M2 MILLIGRAM(S)/SQ. METER, DAY 1 AND 15, EVERY 28 DAYS, INTRAVENOUS (NOT OTHERWISE SPECIFIED)$$$$$$
323415,323416c323411
< 7475788$1016572233$SS$DOXORUBICIN (DOXORUBICIN) (INJECTION)$2$INTRAVENOUS$25 MG/M2 MILLIGRAM(S)/SQ. METER, DAY 1 AND 15, EVERY 28 DAYS, INTRAVENOUS (NOT OTHERWISE SPECIFIED)
< $$$$$$
---
> 7475788$1016572233$SS$DOXORUBICIN (DOXORUBICIN) (INJECTION)$2$INTRAVENOUS$25 MG/M2 MILLIGRAM(S)/SQ. METER, DAY 1 AND 15, EVERY 28 DAYS, INTRAVENOUS (NOT OTHERWISE SPECIFIED)$$$$$$
323427,323430c323422,323423
< 7475791$1016572493$SS$BLEOMYCIN SULFATE$1$INTRAVENOUS$10 MG/M2 MILLIGRAM(S)/SQ. METER, DAY 1 AND 15, EVERY 28 DAYS, INTRAVENOUS (NOT OTHERWISE SPECIFIED)
< $$$$$$
< 7475791$1016572490$SS$DOXORUBICIN (DOXORUBICIN) (INJECTION)$2$INTRAVENOUS$25 MG/M2 MILLIGRAM(S)/SQ. METER, DAY 1 AND 15, EVERY 28 DAYS, INTRAVENOUS (NOT OTHERWISE SPECIFIED)
< $$$$$$
---
> 7475791$1016572493$SS$BLEOMYCIN SULFATE$1$INTRAVENOUS$10 MG/M2 MILLIGRAM(S)/SQ. METER, DAY 1 AND 15, EVERY 28 DAYS, INTRAVENOUS (NOT OTHERWISE SPECIFIED)$$$$$$
> 7475791$1016572490$SS$DOXORUBICIN (DOXORUBICIN) (INJECTION)$2$INTRAVENOUS$25 MG/M2 MILLIGRAM(S)/SQ. METER, DAY 1 AND 15, EVERY 28 DAYS, INTRAVENOUS (NOT OTHERWISE SPECIFIED)$$$$$$
391164,391165c391157
< 7493683$1016550843$PS$XYZAL$1$ORAL$(ORAL)
< $D$D$$$022064$
---
> 7493683$1016550843$PS$XYZAL$1$ORAL$(ORAL)$D$D$$$022064$
447614,447615c447606
< 7508176$1016608894$PS$METFORMIN HYDROCHLORIDE$1$$500 MG  
< $$$$$076450$
---
> 7508176$1016608894$PS$METFORMIN HYDROCHLORIDE$1$$500 MG$$$$$076450$
478698,478699c478689
< 7516104$1016640406$PS$TYVASO$1$RESPIRATORY (INHALATION)$(18 MCG), INHALATION$U$U$11C0016
< $$022387$
---
> 7516104$1016640406$PS$TYVASO$1$RESPIRATORY (INHALATION)$(18 MCG), INHALATION$U$U$11C0016$$022387$
481645,481646c481635
< 7516791$1016717362$SS$VYVANSE$1$ORAL$30 MG (30 MG,1 IN 1 D),ORAL,  50 MG (50 MG,1 IN 1 D),ORAL
< $D$D$$$$
---
> 7516791$1016717362$SS$VYVANSE$1$ORAL$30 MG (30 MG,1 IN 1 D),ORAL,  50 MG (50 MG,1 IN 1 D),ORAL$D$D$$$$
488961,488962c488950
< 7518549$1016650078$PS$ERLOTINIB HYDROCHLORIDE$1$ORAL$(150 MG,QD),ORAL    
< $N$D$$$021743$
---
> 7518549$1016650078$PS$ERLOTINIB HYDROCHLORIDE$1$ORAL$(150 MG,QD),ORAL$N$D$$$021743$
537419,537420c537407
< 7530969$1016697807$PS$CARBAMAZEPINE$1$$
< 600 MG;OD;$Y$Y$$$071696$
---
> 7530969$1016697807$PS$CARBAMAZEPINE$1$$600 MG;OD;$Y$Y$$$071696$
557494,557495c557481
< 7536636$1016717554$PS$FABRAZYME$1$INTRAVENOUS$70 MG, Q2W, INTRAVENOUS
< $D$D$$$$
---
> 7536636$1016717554$PS$FABRAZYME$1$INTRAVENOUS$70 MG, Q2W, INTRAVENOUS$D$D$$$$
603018,603019c603004
< 7548779$1016764189$PS$LIORESAL$1$INTRATHECAL$MCG, DAILY, INTRATHECAL
< $D$D$$$020075$
---
> 7548779$1016764189$PS$LIORESAL$1$INTRATHECAL$MCG, DAILY, INTRATHECAL$D$D$$$020075$
627464,627465c627449
< 7554854$1016789929$PS$CARDIOLITE$1$INTRAVENOUS$(1 IN 1 D), INTRAVENOUS (NOT OTHERWISE
< SPECIFIED)$D$D$$$019785$
---
> 7554854$1016789929$PS$CARDIOLITE$1$INTRAVENOUS$(1 IN 1 D), INTRAVENOUS (NOT OTHERWISE SPECIFIED)$D$D$$$019785$
650174,650175c650158
< 7560673$1016813221$PS$PIPERACILLIN AND TAZOBACTAM$1$INTRAVENOUS$4.5 G GRAM(S) ( 1 DAY), INTRAVENOUS (NOT OTHERWISE SPECIFIED)
< $D$D$$$065386$
---
> 7560673$1016813221$PS$PIPERACILLIN AND TAZOBACTAM$1$INTRAVENOUS$4.5 G GRAM(S) ( 1 DAY), INTRAVENOUS (NOT OTHERWISE SPECIFIED)$D$D$$$065386$
687806,687807c687789
< 7571149$1016850784$PS$EPIDUO$1$TRANSPLACENTAL$(TRANSPLACENTAL)
< $D$D$$$022320$
---
> 7571149$1016850784$PS$EPIDUO$1$TRANSPLACENTAL$(TRANSPLACENTAL)$D$D$$$022320$
700174,700175c700156
< 7574230$1016863673$PS$AZZALURE (BOTULINUM TOXIN TYPE A) (BOTULINUM TOXIN TYPE A)$2$INTRAMUSCULAR$ (SINGLE CVCLE), INTRAMUSCULAR
< $D$D$$$$
---
> 7574230$1016863673$PS$AZZALURE (BOTULINUM TOXIN TYPE A) (BOTULINUM TOXIN TYPE A)$2$INTRAMUSCULAR$ (SINGLE CVCLE), INTRAMUSCULAR$D$D$$$$
737352,737353c737333
< 7582511$1016901069$PS$BYETTA$1$SUBCUTANEOUS$5 UG, 2/D, SUBCUTANEOUS, 10 UG, 2/D
< $Y$D$$$021773$
---
> 7582511$1016901069$PS$BYETTA$1$SUBCUTANEOUS$5 UG, 2/D, SUBCUTANEOUS, 10 UG, 2/D$Y$D$$$021773$
751507,751508c751487
< 7591796$1016938526$PS$PAROXETINE HYDROCHLORIDE$1$TRANSPLACENTAL$
< / TRANSPLACENTARY$$$$$020031$
---
> 7591796$1016938526$PS$PAROXETINE HYDROCHLORIDE$1$TRANSPLACENTAL $ / TRANSPLACENTARY$$$$$020031$
PATCHdemo11q2
#== End Patching
fi
} # End function fix_demo11q2

#========== demo11q3.txt ==========
FIXES["bd1c6f64d7fa2406d2aa9712f0cf3119"]="fix_demo11q3"

function fix_demo11q3 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="e24e97d419cb6e4ca5036c87468dacc4"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo11q3"
94656,94657c94656
< 7610533$1017014882$PS$IBUPROFEN$1$ORAL$78; 1X;PO
< $$$$$074978$
---
> 7610533$1017014882$PS$IBUPROFEN$1$ORAL$78; 1X;PO$$$$$074978$
248241,248245c248240,248241
< 7652730$1017185838$PS$FLUOROURACIL$1$$10140 MG
< 
< $$$$$$
< 7652730$1017255397$SS$BEVACIZUMAB (RHUMAB VEGF)$2$$920 MG
< $$$$$$
---
> 7652730$1017185838$PS$FLUOROURACIL$1$$10140 MG$$$$$$
> 7652730$1017255397$SS$BEVACIZUMAB (RHUMAB VEGF)$2$$920 MG$$$$$$
270198,270199c270194
< 7658386$1017285857$SS$ZOSYN$1$INTRAVENOUS DRIP$18 GM (4.5 GM,L IN 6 HR)  INTRAVENOUS DRIP
< $$$$$$
---
> 7658386$1017285857$SS$ZOSYN$1$INTRAVENOUS DRIP$18 GM (4.5 GM,L IN 6 HR)  INTRAVENOUS DRIP$$$$$$
331810,331811c331805
< 7672307$1017270121$PS$TARCEVA$1$ORAL$150 MG, UID/QD, ORAL 
< $D$D$SS0013$20110111$021743$
---
> 7672307$1017270121$PS$TARCEVA$1$ORAL$150 MG, UID/QD, ORAL$D$D$SS0013$20110111$021743$
499047,499048c499041
< 7723227$1017437419$PS$GEMTUZUMAB OZOGAMICIN (GEMTUZUMAB OZOGAMICIN) UNKNOWN$2$INTRAVENOUS$12 MG, 1X/DAY, INTRAVENOUS 
< $$$$$$
---
> 7723227$1017437419$PS$GEMTUZUMAB OZOGAMICIN (GEMTUZUMAB OZOGAMICIN) UNKNOWN$2$INTRAVENOUS$12 MG, 1X/DAY, INTRAVENOUS$$$$$$
504958,504959c504951
< 7724879$1017443243$PS$SAMSCA$1$ORAL$15 MG MILLIGRAM(S), QD, ORAL
< $D$D$$$022275$
---
> 7724879$1017443243$PS$SAMSCA$1$ORAL$15 MG MILLIGRAM(S), QD, ORAL$D$D$$$022275$
545841,545842c545833
< 7736279$1017484229$PS$LIORESAL$1$INTRATHECAL$100.0 MCG, DAILY, INTRATHECAL
< $D$D$$$020075$
---
> 7736279$1017484229$PS$LIORESAL$1$INTRATHECAL$100.0 MCG, DAILY, INTRATHECAL$D$D$$$020075$
568404,568405c568395
< 7742728$1017507107$PS$REMERON$1$ORAL$15 MG;QD;PO  
< $N$D$$$020415$
---
> 7742728$1017507107$PS$REMERON$1$ORAL$15 MG;QD;PO$N$D$$$020415$
584062,584063c584052
< 7747157$1017521799$PS$MILNACIPRAN (MILNACIPRAN HYDROCHLORIDE) (TABLETS)$2$ORAL$75 MG (75 MG, 1 IN 1 D),ORAL 
< $Y$D$$$022256$
---
> 7747157$1017521799$PS$MILNACIPRAN (MILNACIPRAN HYDROCHLORIDE) (TABLETS)$2$ORAL$75 MG (75 MG, 1 IN 1 D),ORAL$Y$D$$$022256$
589951,589952c589940
< 7749181$1017527430$PS$NOXAFIL$1$ORAL$200 MG; PO
< $Y$D$$$022003$
---
> 7749181$1017527430$PS$NOXAFIL$1$ORAL$200 MG; PO$Y$D$$$022003$
590063,590064c590051
< 7749214$1017527531$PS$ROFLUMILAST (ROFLUMILAST) (TABLETS)$2$ORAL$500 MCG (500 MCG, 1 IN 1 D), ORAL  
< $N$D$$$022522$
---
> 7749214$1017527531$PS$ROFLUMILAST (ROFLUMILAST) (TABLETS)$2$ORAL$500 MCG (500 MCG, 1 IN 1 D), ORAL$N$D$$$022522$
590231,590232c590218
< 7749285$1017527679$PS$TEMODAL$1$$75 MG/M2;QD; 200 MG/M2;QD; 130 MG/M2;QD;
< $D$D$$$021029$
---
> 7749285$1017527679$PS$TEMODAL$1$$75 MG/M2;QD; 200 MG/M2;QD; 130 MG/M2;QD;$D$D$$$021029$
591025,591026c591011
< 7749576$1017528353$PS$REMERON$1$ORAL$15 MG;HS;PO  
< $D$D$$$020415$
---
> 7749576$1017528353$PS$REMERON$1$ORAL$15 MG;HS;PO$D$D$$$020415$
662508,662509c662493
< 7769354$1017599316$PS$ERLOTINIB HYDROCHLORIDE$1$ORAL$150 MG, UID/QD, ORAL
< $D$D$$$021743$
---
> 7769354$1017599316$PS$ERLOTINIB HYDROCHLORIDE$1$ORAL$150 MG, UID/QD, ORAL$D$D$$$021743$
735908,735909c735892
< 7788080$1017673811$PS$TARCEVA$1$ORAL$ 150 MG, UID/QD, ORAL 
< $$D$$$021743$
---
> 7788080$1017673811$PS$TARCEVA$1$ORAL$ 150 MG, UID/QD, ORAL$$D$$$021743$
746691,746692c746674
< 7791757$1017686789$PS$OCTREOTIDE ACETATE$1$INTRAVENOUS BOLUS$
< 50MICROGRAM IV BOLUS FOLLOWED BY CONTINUOUS$D$D$$$076313$
---
> 7791757$1017686789$PS$OCTREOTIDE ACETATE$1$INTRAVENOUS BOLUS$50MICROGRAM IV BOLUS FOLLOWED BY CONTINUOUS$D$D$$$076313$
PATCHdemo11q3
#== End Patching
fi
} # End function fix_demo11q3

#========== demo11q4.txt ==========
FIXES["60f4e45fe54e115ab08afa1720b742e9"]="fix_demo11q4"

function fix_demo11q4 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="62a8e604c6409f36cd1a4bf76c4d8999"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo11q4"
35252,35253c35252
< 7801406$1017721606$PS$PRIALT$1$INTRATHECAL$0.05 UG, ONCE/HOUR, INTRATHECAL
< $Y$D$$$021060$
---
> 7801406$1017721606$PS$PRIALT$1$INTRATHECAL$0.05 UG, ONCE/HOUR, INTRATHECAL$Y$D$$$021060$
109262,109263c109261
< 7820695$1017798479$PS$CITALOPRAM HYDROBROMIDE$1$$
< 20 MG;$$D$$$077033$
---
> 7820695$1017798479$PS$CITALOPRAM HYDROBROMIDE$1$$20 MG;$$D$$$077033$
109309,109310c109307
< 7820714$1017798516$PS$HYDROCORTISONE 2.5% CREAM$1$TOPICAL$;TOP
< $D$D$$$089682$
---
> 7820714$1017798516$PS$HYDROCORTISONE 2.5% CREAM$1$TOPICAL$;TOP$D$D$$$089682$
172823,172824c172820
< 7849350$1017864885$PS$LATUDA$1$ORAL$40 MG;QD;ORAL,  80 MG;QD;ORAL
< $D$D$$$200603$
---
> 7849350$1017864885$PS$LATUDA$1$ORAL$40 MG;QD;ORAL,  80 MG;QD;ORAL$D$D$$$200603$
220883,220884c220879
< 7873088$1017913482$PS$LEXAPRO$1$ORAL$ (15 MG),ORAL  
< $D$D$$$021323$
---
> 7873088$1017913482$PS$LEXAPRO$1$ORAL$ (15 MG),ORAL$D$D$$$021323$
348752,348753c348747
< 7913481$1018043912$PS$LEFLUNOMIDE$1$$20 MG;QD; PO    
< $D$D$$$077090$
---
> 7913481$1018043912$PS$LEFLUNOMIDE$1$$20 MG;QD; PO$D$D$$$077090$
348853,348854c348847
< 7913505$1018043977$PS$ROFLUMILAST (ROFLUMILAST) (500 MICROGRAM, TABLETS)$2$ORAL$500 MCG (500 MCG,ONCE),ORAL
< $N$D$$$022522$
---
> 7913505$1018043977$PS$ROFLUMILAST (ROFLUMILAST) (500 MICROGRAM, TABLETS)$2$ORAL$500 MCG (500 MCG,ONCE),ORAL$N$D$$$022522$
367409,367410c367402
< 7918039$1018062192$PS$LEXAPRO$1$$(20 DOSAGE FORMS)
< $D$D$$$021323$
---
> 7918039$1018062192$PS$LEXAPRO$1$$(20 DOSAGE FORMS)$D$D$$$021323$
447345,447346c447337
< 7941173$1018141809$PS$ACTOS$1$ORAL$ 45 MG, 1 IN 1 D, PER ORAL
< $Y$D$$$021073$
---
> 7941173$1018141809$PS$ACTOS$1$ORAL$ 45 MG, 1 IN 1 D, PER ORAL$Y$D$$$021073$
447697,447698c447688
< 7941234$1018141977$PS$RAMIPRIL$1$$10 MG; 
< $N$D$$$077513$
---
> 7941234$1018141977$PS$RAMIPRIL$1$$10 MG;$N$D$$$077513$
448130,448133c448120,448121
< 7941354$1018142410$PS$MEMANTINE HYDROCHLORIDE$1$ORAL$
< 5 MG (5 MG, 1 IN 1 D),ORAL , 105 MG (10 MG, 1 IN 1 D),ORAL$D$D$$$021487$
< 7941354$1018188213$SS$MEMANTINE HYDROCHLORIDE$1$ORAL$15 MG (15 MG, 1 IN 1 D),ORAL
< $D$D$$$$
---
> 7941354$1018142410$PS$MEMANTINE HYDROCHLORIDE$1$ORAL$5 MG (5 MG, 1 IN 1 D),ORAL , 105 MG (10 MG, 1 IN 1 D),ORAL$D$D$$$021487$
> 7941354$1018188213$SS$MEMANTINE HYDROCHLORIDE$1$ORAL$15 MG (15 MG, 1 IN 1 D),ORAL$D$D$$$$
576647,576648c576635
< 7978133$1018278972$PS$SYCREST (ASENAPINE /05706901/)$2$OTHER$ 5 MG;BID;OTHER, 10 MG;BID;OTHER   
< $Y$D$$$022117$
---
> 7978133$1018278972$PS$SYCREST (ASENAPINE /05706901/)$2$OTHER$ 5 MG;BID;OTHER, 10 MG;BID;OTHER$Y$D$$$022117$
643769,643770c643756
< 7997363$1018345570$PS$PROVENGE$1$INTRAVENOUS$250 ML, SINGLE, INTRAVENOUS
< $D$D$303663-2$$$
---
> 7997363$1018345570$PS$PROVENGE$1$INTRAVENOUS$250 ML, SINGLE, INTRAVENOUS$D$D$303663-2$$$
718931,718932c718917
< 8019279$1018432099$PS$MORPHINE SULFATE$1$INTRAVENOUS$4 MG, 1 INTRAVENOUS (NOT OTHERWISE SPECIFIED)
< $D$D$$$071849$
---
> 8019279$1018432099$PS$MORPHINE SULFATE$1$INTRAVENOUS$4 MG, 1 INTRAVENOUS (NOT OTHERWISE SPECIFIED)$D$D$$$071849$
PATCHdemo11q4
#== End Patching
fi
} # End function fix_demo11q4

#========== demo12q2.txt ==========
FIXES["22c27a4d7dc5b731caa68f4f1aad02bb"]="fix_demo12q2"

function fix_demo12q2 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="723c7498fadc891c47bd33d70cbed7d2"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo12q2"
69274,69275c69274
< 8269753$1019358404$PS$SUCRALFATE$1$ORAL$10 ML 4 TIMES DAILY ORAL   
< $N$D$2A46$$070848$
---
> 8269753$1019358404$PS$SUCRALFATE$1$ORAL$10 ML 4 TIMES DAILY ORAL$N$D$2A46$$070848$
69398,69399c69397
< 8269808$1019358541$PS$MIRTAZAPINE$1$ORAL$ 45 MG; ;PO    
< $D$D$$$077959$
---
> 8269808$1019358541$PS$MIRTAZAPINE$1$ORAL$ 45 MG; ;PO$D$D$$$077959$
147184,147185c147182
< 8293741$1019464394$SS$DOMPERIDONE (DOMPERIDONE)$2$$ (DF)
< $Y$$$$$
---
> 8293741$1019464394$SS$DOMPERIDONE (DOMPERIDONE)$2$$ (DF)$Y$$$$$
147187,147188c147184
< 8293741$1019439971$PS$METRONIDAZOLE$1$$(DF)
< $Y$$$$020743$
---
> 8293741$1019439971$PS$METRONIDAZOLE$1$$(DF)$Y$$$$020743$
298918,298919c298914
< 8339086$1019616619$PS$CHERATUSSIN AC(CODEINE, GUAIFENESIN) (SOLUTION)$2$ORAL$2 BOTTLES, ONCE, ORAL
< $D$D$$$$
---
> 8339086$1019616619$PS$CHERATUSSIN AC(CODEINE, GUAIFENESIN) (SOLUTION)$2$ORAL$2 BOTTLES, ONCE, ORAL$D$D$$$$
308482,308483c308477
< 8341720$1019627106$PS$BACLOFEN$1$INTRATHECAL$440 MCG/DAY INTRATHECAL
< $$$$$020075$
---
> 8341720$1019627106$PS$BACLOFEN$1$INTRATHECAL$440 MCG/DAY INTRATHECAL$$$$$020075$
495557,495558c495551
< 8394818$1019824647$PS$SPRIX$1$NASAL$ONE IN EACH NOSTRIL  NASAL
< $D$D$$$022382$
---
> 8394818$1019824647$PS$SPRIX$1$NASAL$ONE IN EACH NOSTRIL  NASAL$D$D$$$022382$
517300,517301c517293
< 8401048$1019846693$PS$EYLEA$1$$ 
< 0.05 ML, 1 IN 8 WK, INTRAVITREAL$Y$D$$$$
---
> 8401048$1019846693$PS$EYLEA$1$$0.05 ML, 1 IN 8 WK, INTRAVITREAL$Y$D$$$$
527079,527080c527071
< 8403498$1019855954$PS$REVLIMID$1$ORAL$10 MG, 1 IN 1 D, PO$Y$D$
< A09022090$$021880$
---
> 8403498$1019855954$PS$REVLIMID$1$ORAL$10 MG, 1 IN 1 D, PO$Y$D$A09022090$$021880$
583516,583517c583507
< 8420992$1019911776$PS$SAMSCA$1$ORAL$7.5 MG MILLIGRAM(S), BID, ORAL, 30 MG MILLIGRAM(S), BID, ORAL,
< 30 MG MILLI$$$$$022275$
---
> 8420992$1019911776$PS$SAMSCA$1$ORAL$7.5 MG MILLIGRAM(S), BID, ORAL, 30 MG MILLIGRAM(S), BID, ORAL, 30 MG MILLI$$$$$022275$
601785,601786c601775
< 8426072$1019929660$PS$VICTRELIS$1$$800 MG;TID;
< $D$D$$$202258$
---
> 8426072$1019929660$PS$VICTRELIS$1$$800 MG;TID;$D$D$$$202258$
635026,635027c635015
< 8434891$1019961934$PS$AMIODARONE HCL$1$INTRAVENOUS$(5MG/KG) FOR 30 MINS, INTRAVENOUS (NOT OTHERWISE SPECIFIED) CARDIAC FAILURE TACHYCARDIA PAROXYSMAL
< $D$D$$$075761$
---
> 8434891$1019961934$PS$AMIODARONE HCL$1$INTRAVENOUS$(5MG/KG) FOR 30 MINS, INTRAVENOUS (NOT OTHERWISE SPECIFIED) CARDIAC FAILURE TACHYCARDIA PAROXYSMAL$D$D$$$075761$
652899,652900c652887
< 8439701$1019980305$PS$LENALIDOMIDE$1$ORAL$25 MG, 3 WEEKS ON, 1 WEEK OFF, PO,  25 MG, 1 IN 1 D, PO
< $Y$U$$$021880$
---
> 8439701$1019980305$PS$LENALIDOMIDE$1$ORAL$25 MG, 3 WEEKS ON, 1 WEEK OFF, PO,  25 MG, 1 IN 1 D, PO$Y$U$$$021880$
664329,664331c664316
< 8443476$1019992056$PS$XYREM$1$ORAL$
< 
< 6 GM (3 GM,2 IN 1 D),ORAL, ORAL,  (6 GM FIRST DOSE/3 GM SECOND DOSE),ORAL$D$D$$$021196$
---
> 8443476$1019992056$PS$XYREM$1$ORAL$6 GM (3 GM,2 IN 1 D),ORAL, ORAL,  (6 GM FIRST DOSE/3 GM SECOND DOSE),ORAL$D$D$$$021196$
670984,670985c670969
< 8445021$1019998307$PS$ROCURONIUM BROMIDE$1$INTRAVENOUS$40 MG;QD;IV
< $D$D$$$020214$
---
> 8445021$1019998307$PS$ROCURONIUM BROMIDE$1$INTRAVENOUS$40 MG;QD;IV$D$D$$$020214$
683423,683424c683407
< 8448414$1020011145$PS$RISEDRONATE SODIUM$1$ORAL$17.5 MG DAILY, ORAL
< $D$D$$$020835$
---
> 8448414$1020011145$PS$RISEDRONATE SODIUM$1$ORAL$17.5 MG DAILY, ORAL$D$D$$$020835$
708032,708033c708015
< 8455041$1020036568$PS$DALTEPARIN SODIUM$1$SUBCUTANEOUS$12500 IU, SUBCUTANEOUS
< $D$D$$$020287$
---
> 8455041$1020036568$PS$DALTEPARIN SODIUM$1$SUBCUTANEOUS$12500 IU, SUBCUTANEOUS$D$D$$$020287$
713335,713336c713317
< 8456406$1020042049$PS$REVLIMID$1$ORAL$55 MG, DAILY X 21 DAYS, PO, 10.7143 MG, 3 IN 1 WK, PO, 10 MG, DAILY, PO
< $D$D$A10A240502$20130225$021880$
---
> 8456406$1020042049$PS$REVLIMID$1$ORAL$55 MG, DAILY X 21 DAYS, PO, 10.7143 MG, 3 IN 1 WK, PO, 10 MG, DAILY, PO$D$D$A10A240502$20130225$021880$
713442,713443c713423
< 8456442$1020042172$PS$REVLIMID$1$ORAL$25 MG, DAILY X 21 D/28D, PO, 15 MG, DAILY X 21D/28D, PO
< $N$D$A10A24/1601$20130930$021880$
---
> 8456442$1020042172$PS$REVLIMID$1$ORAL$25 MG, DAILY X 21 D/28D, PO, 15 MG, DAILY X 21D/28D, PO$N$D$A10A24/1601$20130930$021880$
718904,718905c718884
< 8457963$1020047836$PS$LIORESAL$1$$225MCG/DAY  
< $$$$$020075$
---
> 8457963$1020047836$PS$LIORESAL$1$$225MCG/DAY$$$$$020075$
718994,718995c718973
< 8457993$1020047935$PS$LIORESAL$1$INTRATHECAL$719.7 MCG, DAILY, INTRA
< $$$$$020075$
---
> 8457993$1020047935$PS$LIORESAL$1$INTRATHECAL$719.7 MCG, DAILY, INTRA$$$$$020075$
722737,722738c722715
< 8458734$1020051553$PS$LAMIVUDINE + ZIDOVUDINE$1$ORAL$2 TAB/CAPS/ORAL
< $D$D$$$079124$
---
> 8458734$1020051553$PS$LAMIVUDINE + ZIDOVUDINE$1$ORAL$2 TAB/CAPS/ORAL$D$D$$$079124$
751697,751698c751674
< 8465898$1020080449$PS$ STALEVO(LEVODOPA, CARBIIDOPA, ENTACAPONE)$2$ORAL$150/37.5/200 MG, 6 TIMES DAILY ORAL
< $D$$$$021485$
---
> 8465898$1020080449$PS$ STALEVO(LEVODOPA, CARBIIDOPA, ENTACAPONE)$2$ORAL$150/37.5/200 MG, 6 TIMES DAILY ORAL$D$$$$021485$
759164,759165c759140
< 8468851$1020088154$PS$ XYREM (500 MILLIGRAM/MILLILITERS, SOLUTION)(SODIUM OXYBATE)$2$ORAL$
< (APPROXIMATELY HALF OF 2.25 GM DOSE),ORAL$D$D$$$021196$
---
> 8468851$1020088154$PS$ XYREM (500 MILLIGRAM/MILLILITERS, SOLUTION)(SODIUM OXYBATE)$2$ORAL$(APPROXIMATELY HALF OF 2.25 GM DOSE),ORAL$D$D$$$021196$
814529,814530c814504
< 8511243$1020250500$PS$DESOGESTREL AND ETHINYL ESTRADIOL$1$ORAL$ ;PO   
< $Y$D$$$20071$
---
> 8511243$1020250500$PS$DESOGESTREL AND ETHINYL ESTRADIOL$1$ORAL$ ;PO$Y$D$$$20071$
PATCHdemo12q2
#== End Patching
fi
} # End function fix_demo12q2

#========== demo12q3.txt ==========
FIXES["a489d3e76f41894b1cf8b01758ee04d8"]="fix_demo12q3"

function fix_demo12q3 {
# Double check this is the corrupt file that needs fixing.
MD5_FULL="b7f5ab26c981881c0eff8385d9c12812"
if md5sum --quiet -c <(echo "${MD5_FULL}  $1") 2>/dev/null >/dev/null ; then
    echo "The patch is needed for $1"
#== Start Patching
patch -i- $1 <<"PATCHdemo12q3"
73049,73050c73049
< 8502381$1020216256$PS$  LYMPHOSTAT-B$2$INTRAVENOUS DRIP$10 MG/KG, 1 IN 28 D, INTRAVENOUS  
< DRIP$D$D$$$$
---
> 8502381$1020216256$PS$  LYMPHOSTAT-B$2$INTRAVENOUS DRIP$10 MG/KG, 1 IN 28 D, INTRAVENOUS  DRIP$D$D$$$$
96353,96354c96352
< 8508802$1020241068$PS$ADCETRIS$1$INTRAVENOUS$126 MG, Q2LD, INTRAVENOUS
< $$$$$$
---
> 8508802$1020241068$PS$ADCETRIS$1$INTRAVENOUS$126 MG, Q2LD, INTRAVENOUS $$$$$$
145353,145354c145351
< 8522469$1020292811$PS$PRIALT$1$INTRATHECAL$0.03 UG, ONCE/HOUR, INTRATHECAL
< $$$$$21060$
---
> 8522469$1020292811$PS$PRIALT$1$INTRATHECAL$0.03 UG, ONCE/HOUR, INTRATHECAL $$$$$21060$
337146,337147c337143
< 8576647$1020494312$PS$AMPYRA$1$ORAL$10 MG, BID, ORAL$N$D$1L900V
< $20140601$22250$
---
> 8576647$1020494312$PS$AMPYRA$1$ORAL$10 MG, BID, ORAL$N$D$1L900V $20140601$22250$
373815,373816c373811
< 8586306$1020532752$PS$ALDURAZYME$1$INTRAVENOUS$3500 IU, QW, INTRAVENOUS
< $U$U$$$$
---
> 8586306$1020532752$PS$ALDURAZYME$1$INTRAVENOUS$3500 IU, QW, INTRAVENOUS $U$U$$$$
424914,424915c424909
< 8600425$1020584370$PS$ACTOS$1$ORAL$
< 31 MG (30 MG, 1 IN 1 D) PER ORAL$Y$D$$$21073$
---
> 8600425$1020584370$PS$ACTOS$1$ORAL$ 31 MG (30 MG, 1 IN 1 D) PER ORAL$Y$D$$$21073$
438080,438081c438074
< 8604337$1020598000$PS$CLOPIDOGREL$1$ORAL$75 MG, ORAL
< $U$U$$$76273$
---
> 8604337$1020598000$PS$CLOPIDOGREL$1$ORAL$75 MG, ORAL $U$U$$$76273$
PATCHdemo12q3
#== End Patching
fi
} # End function fix_demo12q3

#========== MAIN ==========
if [ -z "$1" ]; then show_usage; exit; fi
if [ "$1" == "-h" ] || [ "$1" == "--help" ]; then show_usage; show_description; exit; fi
for F in $*; do
    echo "===== ${F} ====="
    if [ -r "${F}" ]; then 
        echo "Checking..."
        MD5_100K=$(head -c 100000 ${F} |md5sum | cut -d' ' -f1)
        if [ -n "${FIXES[$MD5_100K]}" ]; then ${FIXES[$MD5_100K]} ${F} ; fi
    else 
        echo "Could not read file ${F}"
        echo "Skipping..."
    fi
done
